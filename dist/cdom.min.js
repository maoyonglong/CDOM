!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).CDOM=e()}(this,function(){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}function e(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&n(t,e)}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function n(t,e){return(n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t,e,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=a(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function S(t,e,n){var r=n.range,o=r[0].concat(r[1]),i="linear"===e?t.createLinearGradient.apply(t,o):t.createRadialGradient.apply(t,o);return n.styles.forEach(function(t){i.addColorStop(t.position,t.color)}),i}var u=function(){function n(t,e){r(this,n),this.context=t,this.options=e}return i(n,[{key:"draw",value:function(t){var e=this.context,n=this.options,r=n.stroke,o=n.fill;return this.resetStyle(e),this.applyStyle(),e.beginPath(),t.call(this),e.closePath(),r&&e.stroke(),o&&e.fill(),this}},{key:"resetStyle",value:function(){var t=this.context;t.strokeStyle="#000",t.fillStyle="#000",t.lineWidth=1,t.lineCap="butt",t.lineJoin="miter",t.miterLimit=10,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0,t.shadowColor="rgba(0, 0, 0, 0)"}},{key:"applyStyle",value:function(){var t=this.context;if(!this.alreadyApplyStyle&&this.options){var e=this.options,n=e.stroke,r=e.fill,o=e.common;if(n){var i=n.color,a=n.line,l=n.gradient;if(i&&(t.strokeStyle=i),l&&(t.strokeStyle=S(t,"linear",l)),a){var s=a.dash,u=a.width,c=a.cap,f=a.join,h=a.minterLimit;if(s){var p=s.type,y=s.offset,d=void 0===y?0:y;p&&t.setLineDash(p),d&&(t.lineDashOffset=d)}u&&(t.lineWidth=u),c&&(t.lineCap=c),f&&(t.lineJoin=f),h&&(t.minterLimit=h)}}if(r){var v=r.color,w=r.shadow,g=r.gradient;if(v&&(t.fillStyle=v),w){var b=w.offset,x=w.blur,O=w.color;t.shadowOffsetX=b.x,t.shadowOffsetY=b.y,t.shadowBlur=x,t.shadowColor=O}g&&(t.fillStyle=S(t,"fill",g))}if(o){var k=o.alpha;k&&(t.globalAlpha=k)}this.alreadyApplyStyle=!0}}}]),n}(),c={rectangle:function(){function t(){return r(this,t),l(this,a(t).apply(this,arguments))}return e(t,u),i(t,[{key:"draw",value:function(){var o=this.context;return s(a(t.prototype),"draw",this).call(this,function(){var t=this.options,e=t.origin,n=t.width,r=t.height;o.rect(e.x,e.y,n,r)})}},{key:"clear",value:function(){}}]),t}(),circle:function(){function t(){return r(this,t),l(this,a(t).apply(this,arguments))}return e(t,u),i(t,[{key:"draw",value:function(){var r=this.context;return s(a(t.prototype),"draw",this).call(this,function(){var t=this.options,e=t.origin,n=t.radius;r.arc(e.x,e.y,n,0,2*Math.PI)})}}]),t}()};var f={isCanvasSupport:function(t){return t.getContext&&"function"==typeof t.getContext}};return function(){function e(t){if(r(this,e),!f.isCanvasSupport(t))throw new Error("[error] Your browser don't support canvas.");this.canvas=t,this._context=t.getContext("2d")}return i(e,[{key:"getContext",value:function(){return this._context}},{key:"setContext",value:function(t){this._context=t}},{key:"resizeCanvas",value:function(t,e){this.canvas.width=t,this.canvas.height=e}},{key:"createFigure",value:function(t,e){return function(t,e,n){var r=c[e];if(r)return new r(t,n);throw new Error("[error] The figure you want to create is not exist.")}(this._context,t,e)}}]),e}()});
